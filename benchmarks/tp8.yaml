# ==============================================================================
# VLLM Automated Benchmark Configuration for Ironwood Workloads
# ==============================================================================
#
# This file defines a suite of standalone benchmark runs using the official
# vLLM benchmark script (benchmarks/benchmark_throughput.py), based on the
# workloads defined in DESIGN.md.
#
# Configurations are grouped by model and prefix length to reduce redundancy.

standalone_runs:
  # ==============================================================================
  # Llama-4-Maverick-17B-128E-Instruct
  # ==============================================================================
  - name: "Llama-4-Maverick-17B-128E-Instruct"
    mode: "vllm_throughput"
    tensor_parallel_sizes: [8]
    args: >
      --model "meta-llama/Llama-4-Maverick-17B-128E-Instruct"
      --num-prompts 200
      --quantization fp8
      --kv-cache-dtype fp8
      --dtype auto
    length_configs:
      - { input_len: 1024, output_len: 4096, prefix_len: 0 }
      - { input_len: 1024, output_len: 1024, prefix_len: 0 }
      - { input_len: 8192, output_len: 2048, prefix_len: 7900 }
      - { input_len: 2048, output_len: 256, prefix_len: 1800 }
      - { input_len: 4096, output_len: 256, prefix_len: 1800 }
      - { input_len: 2048, output_len: 8192, prefix_len: 0 }

  # ==============================================================================
  # DeepSeek-R1
  # ==============================================================================
  - name: "DeepSeek-R1"
    mode: "vllm_throughput"
    tensor_parallel_sizes: [8]
    args: >
      --model "deepseek-ai/DeepSeek-R1"
      --num-prompts 200
      --quantization fp8
      --kv-cache-dtype fp8
      --dtype auto
    length_configs:
      - { input_len: 1024, output_len: 4096, prefix_len: 0 }
      - { input_len: 1024, output_len: 1024, prefix_len: 0 }
      - { input_len: 8192, output_len: 2048, prefix_len: 7900 }
      - { input_len: 2048, output_len: 256, prefix_len: 1800 }
      - { input_len: 4096, output_len: 256, prefix_len: 1800 }
      - { input_len: 2048, output_len: 8192, prefix_len: 0 }